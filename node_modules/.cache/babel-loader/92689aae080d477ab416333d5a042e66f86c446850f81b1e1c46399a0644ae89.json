{"ast":null,"code":"import _regeneratorRuntime from \"/Users/carlosmiret/Desktop/TallerAddalia/taller_vue_firebase/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _objectSpread from \"/Users/carlosmiret/Desktop/TallerAddalia/taller_vue_firebase/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"/Users/carlosmiret/Desktop/TallerAddalia/taller_vue_firebase/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport { Firestore, VehiclesCollection /*VehiclesDoc*/ } from \"@/firebase-exports\";\nimport store from \"@/store/index\";\n\n/**\r\n * Obtiene un número aleatorio para las motos.\r\n * @returns {number} Número aleatorio para las motos.\r\n */\nexport function getMotos() {\n  var numeroAleatorio = Math.floor(Math.random() * 100) + 1;\n  return numeroAleatorio;\n}\n\n/**\r\n * Obtiene un número aleatorio para los coches.\r\n * @returns {number} Número aleatorio para los coches.\r\n */\nexport function getCoches() {\n  var numeroAleatorio = Math.floor(Math.random() * 10) + 1;\n  return numeroAleatorio;\n}\n\n/**\r\n * Agrega un vehículo a la colección de vehículos.\r\n * @param {Object} data - Datos del vehículo a agregar.\r\n * @returns {Promise} Promesa que se resuelve cuando se agrega el vehículo.\r\n */\nexport function addVehicle(_x) {\n  return _addVehicle.apply(this, arguments);\n}\n\n/**\r\n * Agrega un coche a la colección de vehículos.\r\n * @param {Object} data - Datos del coche a agregar.\r\n * @returns {Promise} Promesa que se resuelve cuando se agrega el coche.\r\n */\nfunction _addVehicle() {\n  _addVehicle = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(data) {\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return Firestore.addDoc(VehiclesCollection(data.userId), _objectSpread({}, data));\n        case 2:\n          return _context.abrupt(\"return\", _context.sent);\n        case 3:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return _addVehicle.apply(this, arguments);\n}\nexport function addCoche(_x2) {\n  return _addCoche.apply(this, arguments);\n}\n\n/**\r\n * Agrega una moto a la colección de vehículos.\r\n * @param {Object} data - Datos de la moto a agregar.\r\n * @returns {Promise} Promesa que se resuelve cuando se agrega la moto.\r\n */\nfunction _addCoche() {\n  _addCoche = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data) {\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return Firestore.addDoc(VehiclesCollection(data.userId), _objectSpread({}, data));\n        case 2:\n          return _context2.abrupt(\"return\", _context2.sent);\n        case 3:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return _addCoche.apply(this, arguments);\n}\nexport function addMoto(_x3) {\n  return _addMoto.apply(this, arguments);\n}\n\n/**\r\n * Establece una suscripción a los cambios en la colección de firmas de un usuario.\r\n * @param {string} userId - ID del usuario.\r\n * @returns {function} Función para cancelar la suscripción.\r\n */\nfunction _addMoto() {\n  _addMoto = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(data) {\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return Firestore.addDoc(VehiclesCollection(data.userId), _objectSpread({}, data));\n        case 2:\n          return _context3.abrupt(\"return\", _context3.sent);\n        case 3:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return _addMoto.apply(this, arguments);\n}\nexport function vehiclesSubscription(_x4) {\n  return _vehiclesSubscription.apply(this, arguments);\n}\nfunction _vehiclesSubscription() {\n  _vehiclesSubscription = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(userId) {\n    var unsub;\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          // Establece una suscripción a los cambios en la colección de firmas del usuario\n          unsub = Firestore.onSnapshot(Firestore.query(VehiclesCollection(userId)), /*#__PURE__*/function () {\n            var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(querySnapshot) {\n              var vehicles;\n              return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n                while (1) switch (_context5.prev = _context5.next) {\n                  case 0:\n                    _context5.next = 2;\n                    return Promise.all(querySnapshot.docs.map( /*#__PURE__*/function () {\n                      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(doc) {\n                        var document;\n                        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n                          while (1) switch (_context4.prev = _context4.next) {\n                            case 0:\n                              document = doc.data();\n                              return _context4.abrupt(\"return\", _objectSpread({\n                                id: doc.id\n                              }, document));\n                            case 2:\n                            case \"end\":\n                              return _context4.stop();\n                          }\n                        }, _callee4);\n                      }));\n                      return function (_x6) {\n                        return _ref2.apply(this, arguments);\n                      };\n                    }()));\n                  case 2:\n                    vehicles = _context5.sent;\n                    // Guarda los vehículos en el store\n                    store.commit(\"setVehicles\", vehicles);\n                  case 4:\n                  case \"end\":\n                    return _context5.stop();\n                }\n              }, _callee5);\n            }));\n            return function (_x5) {\n              return _ref.apply(this, arguments);\n            };\n          }());\n          return _context6.abrupt(\"return\", unsub);\n        case 2:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6);\n  }));\n  return _vehiclesSubscription.apply(this, arguments);\n}","map":{"version":3,"names":["Firestore","VehiclesCollection","store","getMotos","numeroAleatorio","Math","floor","random","getCoches","addVehicle","_x","_addVehicle","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_callee$","_context","prev","next","addDoc","userId","_objectSpread","abrupt","sent","stop","addCoche","_x2","_addCoche","_callee2","_callee2$","_context2","addMoto","_x3","_addMoto","_callee3","_callee3$","_context3","vehiclesSubscription","_x4","_vehiclesSubscription","_callee6","unsub","_callee6$","_context6","onSnapshot","query","_ref","_callee5","querySnapshot","vehicles","_callee5$","_context5","Promise","all","docs","map","_ref2","_callee4","doc","document","_callee4$","_context4","id","_x6","commit","_x5"],"sources":["/Users/carlosmiret/Desktop/TallerAddalia/taller_vue_firebase/src/services/vehiculos.js"],"sourcesContent":["import {\r\n  Firestore,\r\n  VehiclesCollection /*VehiclesDoc*/,\r\n} from \"@/firebase-exports\";\r\nimport store from \"@/store/index\";\r\n\r\n/**\r\n * Obtiene un número aleatorio para las motos.\r\n * @returns {number} Número aleatorio para las motos.\r\n */\r\nexport function getMotos() {\r\n  let numeroAleatorio = Math.floor(Math.random() * 100) + 1;\r\n  return numeroAleatorio;\r\n}\r\n\r\n/**\r\n * Obtiene un número aleatorio para los coches.\r\n * @returns {number} Número aleatorio para los coches.\r\n */\r\nexport function getCoches() {\r\n  let numeroAleatorio = Math.floor(Math.random() * 10) + 1;\r\n  return numeroAleatorio;\r\n}\r\n\r\n/**\r\n * Agrega un vehículo a la colección de vehículos.\r\n * @param {Object} data - Datos del vehículo a agregar.\r\n * @returns {Promise} Promesa que se resuelve cuando se agrega el vehículo.\r\n */\r\nexport async function addVehicle(data) {\r\n  return await Firestore.addDoc(VehiclesCollection(data.userId), {\r\n    ...data,\r\n  });\r\n}\r\n\r\n/**\r\n * Agrega un coche a la colección de vehículos.\r\n * @param {Object} data - Datos del coche a agregar.\r\n * @returns {Promise} Promesa que se resuelve cuando se agrega el coche.\r\n */\r\nexport async function addCoche(data) {\r\n  return await Firestore.addDoc(VehiclesCollection(data.userId), {\r\n    ...data,\r\n  });\r\n}\r\n\r\n/**\r\n * Agrega una moto a la colección de vehículos.\r\n * @param {Object} data - Datos de la moto a agregar.\r\n * @returns {Promise} Promesa que se resuelve cuando se agrega la moto.\r\n */\r\nexport async function addMoto(data) {\r\n  return await Firestore.addDoc(VehiclesCollection(data.userId), {\r\n    ...data,\r\n  });\r\n}\r\n\r\n/**\r\n * Establece una suscripción a los cambios en la colección de firmas de un usuario.\r\n * @param {string} userId - ID del usuario.\r\n * @returns {function} Función para cancelar la suscripción.\r\n */\r\nexport async function vehiclesSubscription(userId) {\r\n  // Establece una suscripción a los cambios en la colección de firmas del usuario\r\n  const unsub = Firestore.onSnapshot(\r\n    Firestore.query(VehiclesCollection(userId)),\r\n    async (querySnapshot) => {\r\n      // Obtiene los vehículos de los documentos de la consulta\r\n      let vehicles = await Promise.all(\r\n        querySnapshot.docs.map(async (doc) => {\r\n          const document = doc.data();\r\n          return { id: doc.id, ...document };\r\n        })\r\n      );\r\n\r\n      // Guarda los vehículos en el store\r\n      store.commit(\"setVehicles\", vehicles);\r\n    }\r\n  );\r\n\r\n  return unsub;\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}